<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">


<body>
<div layout:fragment="content" class="container mt-5">
    <!-- âœ… Profile Section -->
    <div class="profile-card">
        <h3>ğŸ‘¤ My Profile</h3>
        <p class="text-muted">ê°œì¸ ì •ë³´</p>
        <hr>

        <p><strong>Name:</strong> <span th:text="${member.name}">John Doe</span></p>
        <p><strong>Email:</strong> <span th:text="${member.username}">johndoe@example.com</span></p>
        <p><strong>Address:</strong> <span th:text="${member.address}">123 Main Street</span></p>
        <p><strong>Role:</strong> <span th:text="${member.role}">ROLE_USER</span></p>

<!--        <a href="/user/editInfo" class="btn btn-outline-primary mt-3 w-100">íšŒì› ì •ë³´ ìˆ˜ì •í•˜ê¸°</a>-->
<!--        <button class="btn btn-outline-primary w-100 mt-3" onclick="showPasswordPrompt()">âœï¸ ìˆ˜ì •í•˜ê¸°</button>-->

        <!-- âœ… ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í˜ì´ì§€ë¡œ ì´ë™ -->
        <form th:action="@{/user/verifyPassword}" method="GET" class="mt-3">
            <button type="submit" class="btn btn-outline-primary w-100">âœï¸ ìˆ˜ì •í•˜ê¸°</button>
        </form>
    </div>

    <!-- âœ… Orders Section -->
    <div class="order-card">
        <h4>ğŸ“¦ Order History</h4>
        <hr>

        <!-- ì£¼ë¬¸ì´ ìˆì„ ë•Œ -->
        <table class="table table-hover" th:if="${member.orders.size() > 0}">
            <thead>
            <tr>
                <th>Order ID</th>
                <th>Status</th>
                <th>Total</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${member.orders}">
                <td th:text="${order.id}">1001</td>
                <td>
                    <span class="badge bg-primary" th:if="${order.orderStatus.toString() == 'ORDER_RECEIVED'}">ì ‘ìˆ˜ ì™„ë£Œ</span>
                    <span class="badge bg-success" th:if="${order.orderStatus.toString() == 'PAYMENT_COMPLETED'}">ê²°ì œ ì™„ë£Œ</span>
                    <span class="badge bg-info text-dark" th:if="${order.orderStatus.toString() == 'PREPARING'}">ìƒí’ˆ ì¤€ë¹„ì¤‘</span>
                    <span class="badge bg-warning text-dark" th:if="${order.orderStatus.toString() == 'SHIPPING'}">ë°°ì†¡ì¤‘</span>
                    <span class="badge bg-secondary" th:if="${order.orderStatus.toString() == 'DELIVERED'}">ë°°ì†¡ ì™„ë£Œ</span>
                    <span class="badge bg-danger" th:if="${order.orderStatus.toString() == 'CANCELED'}">ì£¼ë¬¸ ì·¨ì†Œ</span>
                </td>
                <td th:text="${order.totalAmount + ' $'}">150.00 $</td>
            </tr>
            </tbody>
        </table>

        <!-- ì£¼ë¬¸ì´ ì—†ì„ ë•Œ -->
        <div class="alert alert-info text-center" th:if="${member.orders.size() == 0}">
            You have no order history yet. ğŸ—’ï¸
        </div>
    </div>
</div>
</body>
</html>
